<script type="text/discourse-plugin" version="0.8">
  (function() {
    var createWidget = require('discourse/widgets/widget').createWidget;
    var decorateWidget = require('discourse/widgets/widget').decorateWidget;

    createWidget('my-custom-widget', {
      tagName: 'div.my-widget-class',

      html: function() {
        return '<div>Hello, Discourse!</div>';
      }
    });

    decorateWidget('header:after', function(helper) {
      return helper.widget.attach('my-custom-widget');
    });
  })();
</script>